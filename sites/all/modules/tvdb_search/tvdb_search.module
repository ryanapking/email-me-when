<?php
function tvdb_search_menu() {
    $items = array();
    $items['tvdb_search'] = array(
            'title' => 'TVDB Search',
            'type' => MENU_NORMAL_ITEM,
            'access callback' => TRUE,
            'page callback' => 'tvdb_search',
            'menu_name' => 'main-menu',
        );
    return $items;
}

function tvdb_search() {
    $apikey = 'give values here for now';
    $username = 'give values here for now';
    $userkey = 'give values here for now';

    $curl_handler = curl_init();
    $header = [
        "apikey" => $apikey,
        "username" => $username,
        "userkey" => $userkey,
    ];
    $postfields = "{\"apikey\": \"FC67639ADD850DB3\",\"username\": \"ryana207\",  \"userkey\": \"B73CCC932AF50B90\"\n}";

    // Generated by curl-to-PHP: http://incarnate.github.io/curl-to-php/
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, "https://api.thetvdb.com/login");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, "{\"apikey\": \"$apikey\",\"username\": \"$username\",  \"userkey\": \"$userkey\"\n}");
    curl_setopt($ch, CURLOPT_POST, 1);

    $headers = array();
    $headers[] = "Content-Type: application/json";
    $headers[] = "Accept: application/json";
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

    $result = curl_exec($ch);
    if (curl_errno($ch)) {
        echo 'Error:' . curl_error($ch);
    }
    curl_close ($ch);

    echo "<pre>";
    var_dump($result);
    echo "</pre>";
    exit;
}
